; generated by ARM C/C++ Compiler, 4.1 [Build 894]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o..\Output\key.o --asm_dir=..\Listing\ --list_dir=..\Listing\ --depend=..\Output\key.d --cpu=Cortex-M4.fp --apcs=interwork -O1 --diag_suppress=870 -I..\APP -I..\drive -I..\Include -I..\Libraries\CMSIS\inc -I..\Libraries\CMSIS\src -I..\Libraries\FWlib\inc -I..\Libraries\FWlib\src -I..\Listing -I..\Output -I..\Project -I..\STemWinLibrary522\Config -I..\STemWinLibrary522\emWinTask -I..\STemWinLibrary522\GUILib -I..\STemWinLibrary522\inc -I..\User -I..\USB\STM32_USB_HOST_Library\Class\HID\inc -I..\USB\STM32_USB_HOST_Library\Class\MSC\src -I..\USB\STM32_USB_HOST_Library\Core\src -I..\USB\USB_APP -I..\USB\STM32_USB_HOST_Library\Class\HID\src -I..\USB\STM32_USB_HOST_Library\Class\MSC\inc -I..\USB\STM32_USB_HOST_Library\Core\inc -I..\USB\STM32_USB_OTG_Driver\inc -I..\FATFS\exfuns -I..\FATFS\src\option -I..\FATFS\src -I..\MALLOC -ID:\Keil\ARM\RV31\Inc -ID:\Keil\ARM\CMSIS\Include -ID:\Keil\ARM\Inc\ST\STM32F4xx -DUSE_STDPERIPH_DRIVER -DSTM32F40XX -DUSE_USB_OTG_FS -DUSE_EMBEDDED_PHY -DUSE_USB_OTG_HS -DSTM32F40XX --omf_browse=..\Output\key.crf ..\drive\key.c]
                          THUMB

                          AREA ||i.Key_Funtion||, CODE, READONLY, ALIGN=2

                  Key_Funtion PROC
;;;179    /***************************************************************************************************************************/
;;;180    void Key_Funtion(void)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;181    {
;;;182    	vu32 KeyValue = 0;
;;;183    	static vu8 t_KEYON;
;;;184    	static vu8 a,b;
;;;185    /****************************************************çŸ­æŒ‰åŠŸèƒ½************************************************************/
;;;186    	if(Flag_Key_Scan==1)
000004  4f92              LDR      r7,|L1.592|
000006  6838              LDR      r0,[r7,#0]  ; flagA
000008  0701              LSLS     r1,r0,#28
00000a  d57c              BPL      |L1.262|
;;;187    	{
;;;188    		Flag_Key_Scan = 0;
00000c  f0200008          BIC      r0,r0,#8
000010  6038              STR      r0,[r7,#0]  ; flagA
;;;189    		KeyValue = Key_Scan();
000012  f7fffffe          BL       Key_Scan
;;;190    		switch(KeyValue)
000016  3844              SUBS     r0,r0,#0x44
;;;191    		{
;;;192    			case KEY_1 ://
;;;193    			{
;;;194    				SET_Voltage=1000;
000018  4e8e              LDR      r6,|L1.596|
;;;195    				SET_Current=4000;
;;;196    				KeyCounter = 0;
;;;197    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;198    			}
;;;199    			break;
;;;200    			
;;;201    			case KEY_2 ://
;;;202    			{
;;;203    				SET_Voltage=420;
;;;204    				SET_Current=1000;
;;;205    				KeyCounter = 0;
;;;206    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;207    			}
;;;208    			break;
;;;209    			
;;;210    			case KEY_3 ://
;;;211    			{
;;;212    				KeyCounter = 0;
;;;213    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;214    			}
;;;215    			break;
;;;216    			
;;;217    			case KEY_4 ://
;;;218    			{
;;;219    				KeyCounter = 0;
;;;220    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;221    			}
;;;222    			break;
;;;223    			
;;;224    			case KEY_5 ://
;;;225    			{
;;;226    				KeyCounter = 0;
;;;227    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;228    			}
;;;229    			break;	
;;;230    			
;;;231    			case KEY_6 ://
;;;232    			{
;;;233    				KeyCounter = 0;
;;;234    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;235    			}
;;;236    			break;
;;;237    			
;;;238    			case KEY_7 ://
;;;239    			{
;;;240    				KeyCounter = 0;
;;;241    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;242    			}
;;;243    			break;
;;;244    			
;;;245    			case KEY_8 ://
;;;246    			{
;;;247    				KeyCounter = 0;
;;;248    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;249    			}
;;;250    			break;
;;;251    			
;;;252    			case KEY_9 ://
;;;253    			{
;;;254    				KeyCounter = 0;
;;;255    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;256    			}
;;;257    			break;
;;;258    			
;;;259    			case KEY_0 ://
;;;260    			{
;;;261    				KeyCounter = 0;
;;;262    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;263    			}
;;;264    			break;
;;;265    			
;;;266    			case KEY_dian ://
;;;267    			{
;;;268    				KeyCounter = 0;
;;;269    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;270    			}
;;;271    			break;
;;;272    			
;;;273    			case KEY_ESC :
;;;274    			{
;;;275    				KeyCounter = 0;
;;;276    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;277    			}
;;;278    			break;
;;;279    			
;;;280    			case PUSH_Lift :
;;;281    			{
;;;282    				KeyCounter = 0;
;;;283    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;284    			}
;;;285    			break;
;;;286    			case PUSH_Right :
;;;287    			{
;;;288    				KeyCounter = 0;
;;;289    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;290    			}
;;;291    			break;
;;;292    			case PUSH_Up :
;;;293    			{
;;;294    				KeyCounter = 0;
;;;295    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;296    				SET_Current_Laod=SET_Current_Laod+1;
;;;297    			}
;;;298    			break;
;;;299    			case PUSH_Down :
;;;300    			{
;;;301    				KeyCounter = 0;
;;;302    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;303    				SET_Current_Laod=SET_Current_Laod-1;
;;;304    			}
;;;305    			break;
;;;306    			
;;;307    			case ENTER ://
;;;308    			{
;;;309                    LCD_Initializtion();
;;;310    				KeyCounter = 0;
;;;311    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;312    			}
;;;313    			break;
;;;314    			case PUSH_DISP :
;;;315    			{
;;;316    				KeyCounter = 0;
;;;317    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;318    			}
;;;319    			break;
;;;320    			case PUSH_SETUP :
;;;321    			{
;;;322    				KeyCounter = 0;
;;;323    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;324    			}
;;;325    			break;
;;;326    			case KEY_TRIG:
;;;327    			{
;;;328    				t_onoff++;
;;;329    				if(t_onoff>1)
;;;330    				{
;;;331    					t_onoff=0;
;;;332    				}
;;;333    				if(t_onoff==0)
;;;334    				{
;;;335    					Flag_Swtich_ON=0;
;;;336    					GPIO_SetBits(GPIOC,GPIO_Pin_1);//OFF
;;;337    					
;;;338    				}
;;;339    				else if(t_onoff==1)
;;;340    				{
;;;341    					Flag_Swtich_ON=1;
;;;342    					GPIO_ResetBits(GPIOC,GPIO_Pin_1);//On
;;;343    				}
;;;344    				KeyCounter = 0;
;;;345    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;346    			}
;;;347    			break;
;;;348    			case KEY_Reset:
;;;349    			{
;;;350    				static vu8 POW_t;
;;;351    				POW_t++;
;;;352    				if(POW_t>1)
;;;353    				{
;;;354    					POW_t=0;
;;;355    				}
;;;356    				if(POW_t==0)
;;;357    				{
;;;358    					GPIO_ResetBits(GPIOB,GPIO_Pin_13);//å…³é—­ç¨³åŽ‹ç”µæºè¾“å‡º
;;;359    				}
;;;360    				else if(POW_t==1)
;;;361    				{
;;;362    					GPIO_SetBits(GPIOB,GPIO_Pin_13);//æ‰“å¼€ç¨³åŽ‹ç”µæºè¾“å‡º
;;;363    				}
;;;364    				KeyCounter = 0;
;;;365    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;366    			}
;;;367    			break;
;;;368    			case KEY_Powe :
;;;369    			{
;;;370    				
;;;371    				KeyCounter = 0;
;;;372    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;373    			}
;;;374    			break;
;;;375    			case KEY_Face1 :
;;;376    			{
;;;377    				WM_DeleteWindow(hWinWind);
00001a  f8df823c          LDR      r8,|L1.600|
;;;378    				WM_DeleteWindow(hWinR);
00001e  f8df923c          LDR      r9,|L1.604|
000022  2400              MOVS     r4,#0                 ;182
000024  4d8e              LDR      r5,|L1.608|
000026  f44f717a          MOV      r1,#0x3e8             ;194
00002a  2834              CMP      r0,#0x34              ;190
00002c  d271              BCS      |L1.274|
00002e  e8dff000          TBB      [pc,r0]               ;190
000032  fe5e              DCB      0xfe,0x5e
000034  68807070          DCB      0x68,0x80,0x70,0x70
000038  7070fd79          DCB      0x70,0x70,0xfd,0x79
00003c  1a857070          DCB      0x1a,0x85,0x70,0x70
000040  7070ef63          DCB      0x70,0x70,0xef,0x63
000044  23317070          DCB      0x23,0x31,0x70,0x70
000048  7070dd4f          DCB      0x70,0x70,0xdd,0x4f
00004c  2c367070          DCB      0x2c,0x36,0x70,0x70
000050  7070cb54          DCB      0x70,0x70,0xcb,0x54
000054  ac407070          DCB      0xac,0x40,0x70,0x70
000058  7070c659          DCB      0x70,0x70,0xc6,0x59
00005c  70457070          DCB      0x70,0x45,0x70,0x70
000060  7070728a          DCB      0x70,0x70,0x72,0x8a
000064  3b4a              DCB      0x3b,0x4a
000066  8071              STRH     r1,[r6,#2]            ;194
000068  f44f607a          MOV      r0,#0xfa0             ;195
00006c  80b0              STRH     r0,[r6,#4]            ;195
00006e  812c              STRH     r4,[r5,#8]            ;196
000070  e8bd47f0          POP      {r4-r10,lr}           ;197
000074  f7ffbffe          B.W      BEEP_Tiggr
000078  f44f70d2          MOV      r0,#0x1a4             ;203
00007c  8070              STRH     r0,[r6,#2]            ;203
00007e  80b1              STRH     r1,[r6,#4]            ;204
000080  812c              STRH     r4,[r5,#8]            ;205
000082  e8bd47f0          POP      {r4-r10,lr}           ;206
000086  f7ffbffe          B.W      BEEP_Tiggr
00008a  812c              STRH     r4,[r5,#8]            ;212
00008c  e8bd47f0          POP      {r4-r10,lr}           ;213
000090  f7ffbffe          B.W      BEEP_Tiggr
000094  812c              STRH     r4,[r5,#8]            ;219
000096  e8bd47f0          POP      {r4-r10,lr}           ;220
00009a  f7ffbffe          B.W      BEEP_Tiggr
00009e  812c              STRH     r4,[r5,#8]            ;226
0000a0  e8bd47f0          POP      {r4-r10,lr}           ;227
0000a4  f7ffbffe          B.W      BEEP_Tiggr
0000a8  812c              STRH     r4,[r5,#8]            ;233
0000aa  e8bd47f0          POP      {r4-r10,lr}           ;234
0000ae  f7ffbffe          B.W      BEEP_Tiggr
0000b2  812c              STRH     r4,[r5,#8]            ;240
0000b4  e8bd47f0          POP      {r4-r10,lr}           ;241
0000b8  f7ffbffe          B.W      BEEP_Tiggr
0000bc  812c              STRH     r4,[r5,#8]            ;247
0000be  e8bd47f0          POP      {r4-r10,lr}           ;248
0000c2  f7ffbffe          B.W      BEEP_Tiggr
0000c6  812c              STRH     r4,[r5,#8]            ;254
0000c8  e8bd47f0          POP      {r4-r10,lr}           ;255
0000cc  f7ffbffe          B.W      BEEP_Tiggr
0000d0  812c              STRH     r4,[r5,#8]            ;261
0000d2  e8bd47f0          POP      {r4-r10,lr}           ;262
0000d6  f7ffbffe          B.W      BEEP_Tiggr
0000da  812c              STRH     r4,[r5,#8]            ;268
0000dc  e8bd47f0          POP      {r4-r10,lr}           ;269
0000e0  f7ffbffe          B.W      BEEP_Tiggr
0000e4  812c              STRH     r4,[r5,#8]            ;275
0000e6  e8bd47f0          POP      {r4-r10,lr}           ;276
0000ea  f7ffbffe          B.W      BEEP_Tiggr
0000ee  812c              STRH     r4,[r5,#8]            ;282
0000f0  e8bd47f0          POP      {r4-r10,lr}           ;283
0000f4  f7ffbffe          B.W      BEEP_Tiggr
0000f8  812c              STRH     r4,[r5,#8]            ;288
0000fa  e8bd47f0          POP      {r4-r10,lr}           ;289
0000fe  f7ffbffe          B.W      BEEP_Tiggr
000102  812c              STRH     r4,[r5,#8]            ;294
000104  e000              B        |L1.264|
                  |L1.262|
000106  e004              B        |L1.274|
                  |L1.264|
000108  f7fffffe          BL       BEEP_Tiggr
00010c  8930              LDRH     r0,[r6,#8]            ;296  ; Run_Control
00010e  1c40              ADDS     r0,r0,#1              ;296
000110  8130              STRH     r0,[r6,#8]            ;296
                  |L1.274|
;;;379    				CreateR();
;;;380    				Mode_SW_CONT(0x01);//è¿›å…¥å†…é˜»æµ‹è¯•æ¨¡å¼
;;;381    				KeyCounter = 0;
;;;382    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;383    			}
;;;384    			break;
;;;385    			case KEY_Face2 :
;;;386    			{
;;;387    				WM_DeleteWindow(hWinR);
;;;388    				WM_DeleteWindow(hWinWind);
;;;389    				CreateWindow2();
;;;390    				Mode_SW_CONT(0x02);//è¿›å…¥è´Ÿè½½æ¨¡å¼
;;;391    				KeyCounter = 0;
;;;392    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;393    			}
;;;394    			break;
;;;395    			case KEY_Face3 :
;;;396    			{
;;;397    				WM_DeleteWindow(hWinR);
;;;398    				WM_DeleteWindow(hWinWind);
;;;399    				CreateWindow();
;;;400    				Mode_SW_CONT(0x03);//è¿›å…¥ç”µæºæ¨¡å¼
;;;401    				KeyCounter = 0;
;;;402    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;403    			}
;;;404    			break;
;;;405    			case KEY_Face4 :
;;;406    			{
;;;407    				KeyCounter = 0;
;;;408    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;409    			}
;;;410    			break;
;;;411    			case KEY_Face5 :
;;;412    			{
;;;413    				KeyCounter = 0;
;;;414    				BEEP_Tiggr();//è§¦å‘èœ‚é¸£å™¨
;;;415    			}
;;;416    			break;
;;;417    			
;;;418    			default:
;;;419    			break;
;;;420    		}	
;;;421    	}
;;;422    }
000112  e8bd87f0          POP      {r4-r10,pc}
000116  812c              STRH     r4,[r5,#8]            ;301
000118  f7fffffe          BL       BEEP_Tiggr
00011c  8930              LDRH     r0,[r6,#8]            ;303  ; Run_Control
00011e  1e40              SUBS     r0,r0,#1              ;303
000120  8130              STRH     r0,[r6,#8]            ;303
000122  e7f6              B        |L1.274|
000124  f7fffffe          BL       LCD_Initializtion
000128  812c              STRH     r4,[r5,#8]            ;310
00012a  e8bd47f0          POP      {r4-r10,lr}           ;311
00012e  f7ffbffe          B.W      BEEP_Tiggr
000132  812c              STRH     r4,[r5,#8]            ;316
000134  e8bd47f0          POP      {r4-r10,lr}           ;317
000138  f7ffbffe          B.W      BEEP_Tiggr
00013c  812c              STRH     r4,[r5,#8]            ;322
00013e  e8bd47f0          POP      {r4-r10,lr}           ;323
000142  f7ffbffe          B.W      BEEP_Tiggr
000146  7968              LDRB     r0,[r5,#5]            ;328  ; t_onoff
000148  1c40              ADDS     r0,r0,#1              ;328
00014a  7168              STRB     r0,[r5,#5]            ;328
00014c  7968              LDRB     r0,[r5,#5]            ;329  ; t_onoff
00014e  2801              CMP      r0,#1                 ;329
000150  d900              BLS      |L1.340|
000152  716c              STRB     r4,[r5,#5]            ;331
                  |L1.340|
000154  7969              LDRB     r1,[r5,#5]            ;333  ; t_onoff
000156  4843              LDR      r0,|L1.612|
000158  b119              CBZ      r1,|L1.354|
00015a  7969              LDRB     r1,[r5,#5]            ;339  ; t_onoff
00015c  2901              CMP      r1,#1                 ;339
00015e  d008              BEQ      |L1.370|
000160  e00e              B        |L1.384|
                  |L1.354|
000162  6839              LDR      r1,[r7,#0]            ;335  ; flagA
000164  f0210140          BIC      r1,r1,#0x40           ;335
000168  6039              STR      r1,[r7,#0]            ;335  ; flagA
00016a  2102              MOVS     r1,#2                 ;336
00016c  f7fffffe          BL       GPIO_SetBits
000170  e006              B        |L1.384|
                  |L1.370|
000172  6839              LDR      r1,[r7,#0]            ;341  ; flagA
000174  f0410140          ORR      r1,r1,#0x40           ;341
000178  6039              STR      r1,[r7,#0]            ;341  ; flagA
00017a  2102              MOVS     r1,#2                 ;342
00017c  f7fffffe          BL       GPIO_ResetBits
                  |L1.384|
000180  812c              STRH     r4,[r5,#8]            ;344
000182  e8bd47f0          POP      {r4-r10,lr}           ;345
000186  f7ffbffe          B.W      BEEP_Tiggr
00018a  78e8              LDRB     r0,[r5,#3]            ;351  ; POW_t
00018c  1c40              ADDS     r0,r0,#1              ;351
00018e  70e8              STRB     r0,[r5,#3]            ;351
000190  78e8              LDRB     r0,[r5,#3]            ;352  ; POW_t
000192  2801              CMP      r0,#1                 ;352
000194  d900              BLS      |L1.408|
000196  70ec              STRB     r4,[r5,#3]            ;354
                  |L1.408|
000198  78ea              LDRB     r2,[r5,#3]            ;356  ; POW_t
00019a  4833              LDR      r0,|L1.616|
00019c  f44f5100          MOV      r1,#0x2000            ;358
0001a0  b11a              CBZ      r2,|L1.426|
0001a2  78ea              LDRB     r2,[r5,#3]            ;360  ; POW_t
0001a4  2a01              CMP      r2,#1                 ;360
0001a6  d003              BEQ      |L1.432|
0001a8  e004              B        |L1.436|
                  |L1.426|
0001aa  f7fffffe          BL       GPIO_ResetBits
0001ae  e001              B        |L1.436|
                  |L1.432|
0001b0  f7fffffe          BL       GPIO_SetBits
                  |L1.436|
0001b4  812c              STRH     r4,[r5,#8]            ;364
0001b6  e8bd47f0          POP      {r4-r10,lr}           ;365
0001ba  f7ffbffe          B.W      BEEP_Tiggr
0001be  812c              STRH     r4,[r5,#8]            ;371
0001c0  e8bd47f0          POP      {r4-r10,lr}           ;372
0001c4  f7ffbffe          B.W      BEEP_Tiggr
0001c8  f8d80000          LDR      r0,[r8,#0]            ;377  ; hWinWind
0001cc  f7fffffe          BL       WM_DeleteWindow
0001d0  f8d90000          LDR      r0,[r9,#0]            ;378  ; hWinR
0001d4  f7fffffe          BL       WM_DeleteWindow
0001d8  f7fffffe          BL       CreateR
0001dc  2001              MOVS     r0,#1                 ;380
0001de  f7fffffe          BL       Mode_SW_CONT
0001e2  812c              STRH     r4,[r5,#8]            ;381
0001e4  e8bd47f0          POP      {r4-r10,lr}           ;382
0001e8  f7ffbffe          B.W      BEEP_Tiggr
0001ec  f8d90000          LDR      r0,[r9,#0]            ;387  ; hWinR
0001f0  f7fffffe          BL       WM_DeleteWindow
0001f4  f8d80000          LDR      r0,[r8,#0]            ;388  ; hWinWind
0001f8  f7fffffe          BL       WM_DeleteWindow
0001fc  f7fffffe          BL       CreateWindow2
000200  2002              MOVS     r0,#2                 ;390
000202  f7fffffe          BL       Mode_SW_CONT
000206  812c              STRH     r4,[r5,#8]            ;391
000208  e8bd47f0          POP      {r4-r10,lr}           ;392
00020c  f7ffbffe          B.W      BEEP_Tiggr
000210  f8d90000          LDR      r0,[r9,#0]            ;397  ; hWinR
000214  f7fffffe          BL       WM_DeleteWindow
000218  f8d80000          LDR      r0,[r8,#0]            ;398  ; hWinWind
00021c  f7fffffe          BL       WM_DeleteWindow
000220  f7fffffe          BL       CreateWindow
000224  2003              MOVS     r0,#3                 ;400
000226  f7fffffe          BL       Mode_SW_CONT
00022a  e001              B        |L1.560|
00022c  e005              B        |L1.570|
00022e  e009              B        |L1.580|
                  |L1.560|
000230  812c              STRH     r4,[r5,#8]            ;401
000232  e8bd47f0          POP      {r4-r10,lr}           ;402
000236  f7ffbffe          B.W      BEEP_Tiggr
                  |L1.570|
00023a  812c              STRH     r4,[r5,#8]            ;407
00023c  e8bd47f0          POP      {r4-r10,lr}           ;408
000240  f7ffbffe          B.W      BEEP_Tiggr
                  |L1.580|
000244  812c              STRH     r4,[r5,#8]            ;413
000246  e8bd47f0          POP      {r4-r10,lr}           ;414
00024a  f7ffbffe          B.W      BEEP_Tiggr
;;;423    // /***************************************************************************************************************************/
                          ENDP

00024e  0000              DCW      0x0000
                  |L1.592|
                          DCD      flagA
                  |L1.596|
                          DCD      Run_Control
                  |L1.600|
                          DCD      hWinWind
                  |L1.604|
                          DCD      hWinR
                  |L1.608|
                          DCD      ||area_number.15||
                  |L1.612|
                          DCD      0x40020800
                  |L1.616|
                          DCD      0x40020400

                          AREA ||i.Key_Scan||, CODE, READONLY, ALIGN=2

                  Key_Scan PROC
;;;123    /************************************************************************************************************************/
;;;124    vu32 Key_Scan(void)
000000  b530              PUSH     {r4,r5,lr}
;;;125    {
;;;126    	static vu8 KeyState = KEY_INIT_STATE;
;;;127    	static vu8 IsKeyRelease = 1;
;;;128    
;;;129    	static vu8 KeyValueTemp = 0;
;;;130    	vu8 KeyValue ;
;;;131    	KeyValue= KEY_NULL_VALUE;
;;;132    	
;;;133    	if((NewKey>0x37)&&(IsKeyRelease==1))
000002  4922              LDR      r1,|L2.140|
000004  790d              LDRB     r5,[r1,#4]  ; NewKey
;;;134    	{
;;;135    		if(KeyState == KEY_INIT_STATE)                    /*ÎÞ°´¼ü°´ÏÂ*/
;;;136    		{
;;;137    			KeyState = KEY_WOBBLE_STATE;
;;;138    			return KEY_NULL_VALUE;
;;;139    		}
;;;140    		else if(KeyState == KEY_WOBBLE_STATE)                /* Ïû¶¶ */
;;;141    		{
;;;142    			KeyState = KEY_PRESS_STATE;
;;;143    			return KEY_NULL_VALUE;
;;;144    		}
;;;145    		else if(KeyState == KEY_PRESS_STATE)                /* ÓÐ°´¼ü°´ÏÂ£¬·µ»Ø°´¼üÖµ */
;;;146    		{
;;;147    			KeyValue = NewKey;
;;;148    			KeyValueTemp = KeyValue;
;;;149    			KeyState = KEY_CONTINUE_STATE;
;;;150    			return KeyValue;
;;;151    		}
;;;152    		else if(KeyState == KEY_CONTINUE_STATE)           /*Ë«»÷°´¼ü*/
;;;153    		{
;;;154    			KeyCounter ++;
;;;155    			if(KeyCounter == KEY_CONTINUE_PERIOD)
;;;156    			{
;;;157    				 KeyCounter = 0;
;;;158    				 KeyState = KEY_LONG_STATE;
;;;159    			}
;;;160    		}
;;;161    		else if(KeyState == KEY_LONG_STATE)                        /* ³¤°´°´¼ü */
;;;162    		{
;;;163    			KeyCounter ++;
;;;164    			if(KeyCounter == KEY_LONG_PERIOD)
;;;165    			{
;;;166    				KeyCounter = 0;
;;;167    				Flag_Long=1; //³¤°´´¥·¢±êÖ¾Î»
000006  4a22              LDR      r2,|L2.144|
000008  2300              MOVS     r3,#0                 ;131
00000a  2401              MOVS     r4,#1                 ;137
00000c  6810              LDR      r0,[r2,#0]            ;133
00000e  2d37              CMP      r5,#0x37              ;133
000010  d902              BLS      |L2.24|
000012  784d              LDRB     r5,[r1,#1]            ;133  ; IsKeyRelease
000014  2d01              CMP      r5,#1                 ;133
000016  d009              BEQ      |L2.44|
                  |L2.24|
;;;168    			}
;;;169    		}
;;;170    	}
;;;171    	else if(NewKey<=0x37)
000018  790d              LDRB     r5,[r1,#4]  ; NewKey
00001a  2d37              CMP      r5,#0x37
00001c  d804              BHI      |L2.40|
;;;172    	{
;;;173    		KeyState = KEY_INIT_STATE;        /* Îó´¥·¢£¬·µ»Øµ½³õÊ¼×´Ì¬ */
00001e  700b              STRB     r3,[r1,#0]
;;;174    		IsKeyRelease = 1;
000020  704c              STRB     r4,[r1,#1]
;;;175    		Flag_Long=0;
000022  f0200004          BIC      r0,r0,#4
000026  6010              STR      r0,[r2,#0]  ; flagB
                  |L2.40|
;;;176    	}
;;;177    	return KEY_NULL_VALUE;
000028  2000              MOVS     r0,#0
;;;178    }
00002a  bd30              POP      {r4,r5,pc}
                  |L2.44|
00002c  780d              LDRB     r5,[r1,#0]            ;135  ; KeyState
00002e  b1b5              CBZ      r5,|L2.94|
000030  780c              LDRB     r4,[r1,#0]            ;140  ; KeyState
000032  2c01              CMP      r4,#1                 ;140
000034  d016              BEQ      |L2.100|
000036  780c              LDRB     r4,[r1,#0]            ;145  ; KeyState
000038  2c02              CMP      r4,#2                 ;145
00003a  d017              BEQ      |L2.108|
00003c  780c              LDRB     r4,[r1,#0]            ;152  ; KeyState
00003e  2c04              CMP      r4,#4                 ;152
000040  d019              BEQ      |L2.118|
000042  780c              LDRB     r4,[r1,#0]            ;161  ; KeyState
000044  2c03              CMP      r4,#3                 ;161
000046  d1ef              BNE      |L2.40|
000048  890c              LDRH     r4,[r1,#8]            ;163  ; KeyCounter
00004a  1c64              ADDS     r4,r4,#1              ;163
00004c  810c              STRH     r4,[r1,#8]            ;163
00004e  890c              LDRH     r4,[r1,#8]            ;164  ; KeyCounter
000050  2c32              CMP      r4,#0x32              ;164
000052  d1e9              BNE      |L2.40|
000054  810b              STRH     r3,[r1,#8]            ;166
000056  f0400004          ORR      r0,r0,#4              ;167
00005a  6010              STR      r0,[r2,#0]            ;167  ; flagB
00005c  e7e4              B        |L2.40|
                  |L2.94|
00005e  700c              STRB     r4,[r1,#0]            ;137
000060  2000              MOVS     r0,#0                 ;138
000062  bd30              POP      {r4,r5,pc}
                  |L2.100|
000064  2002              MOVS     r0,#2                 ;142
000066  7008              STRB     r0,[r1,#0]            ;142
000068  2000              MOVS     r0,#0                 ;143
00006a  bd30              POP      {r4,r5,pc}
                  |L2.108|
00006c  7908              LDRB     r0,[r1,#4]            ;147  ; NewKey
00006e  7088              STRB     r0,[r1,#2]            ;148
000070  2204              MOVS     r2,#4                 ;149
000072  700a              STRB     r2,[r1,#0]            ;149
000074  bd30              POP      {r4,r5,pc}
                  |L2.118|
000076  8908              LDRH     r0,[r1,#8]            ;154  ; KeyCounter
000078  1c40              ADDS     r0,r0,#1              ;154
00007a  8108              STRH     r0,[r1,#8]            ;154
00007c  8908              LDRH     r0,[r1,#8]            ;155  ; KeyCounter
00007e  280a              CMP      r0,#0xa               ;155
000080  d1d2              BNE      |L2.40|
000082  810b              STRH     r3,[r1,#8]            ;157
000084  2003              MOVS     r0,#3                 ;158
000086  7008              STRB     r0,[r1,#0]            ;158
000088  e7ce              B        |L2.40|
;;;179    /***************************************************************************************************************************/
                          ENDP

00008a  0000              DCW      0x0000
                  |L2.140|
                          DCD      ||area_number.15||
                  |L2.144|
                          DCD      flagB

                          AREA ||i.Mode_SW_CONT||, CODE, READONLY, ALIGN=2

                  Mode_SW_CONT PROC
;;;983    /********************************************************************************/
;;;984    void Mode_SW_CONT(vu8 mode)//Ä£Ê½ÈÛ»à ˜×†
000000  b570              PUSH     {r4-r6,lr}
;;;985    {
;;;986    	switch(mode)
;;;987    	{
;;;988    		case 0x01 ://ÅšØ¨Ó¢Ë”Ä£Ê½
;;;989    		{
;;;990    			GPIO_ResetBits(GPIOE,GPIO_Pin_2);
000002  4c14              LDR      r4,|L3.84|
;;;991    			GPIO_ResetBits(GPIOE,GPIO_Pin_3);
;;;992                mode_sw = mode_r;
000004  4d14              LDR      r5,|L3.88|
000006  2801              CMP      r0,#1                 ;986
000008  d00e              BEQ      |L3.40|
00000a  2802              CMP      r0,#2                 ;986
00000c  d017              BEQ      |L3.62|
00000e  2803              CMP      r0,#3                 ;986
000010  d109              BNE      |L3.38|
;;;993    		}
;;;994    		break;
;;;995    		case 0x02 ://ØºÕ˜Ä£Ê½
;;;996    		{
;;;997    			GPIO_SetBits(GPIOE,GPIO_Pin_2);
;;;998    			GPIO_ResetBits(GPIOE,GPIO_Pin_3);
;;;999                mode_sw = mode_load;
;;;1000   		}
;;;1001   		break;
;;;1002   		case 0x03 ://Ö±Â·Ö§Ô´Ä£Ê½
;;;1003   		{
;;;1004   			GPIO_ResetBits(GPIOE,GPIO_Pin_2);//
000012  2104              MOVS     r1,#4
000014  4620              MOV      r0,r4
000016  f7fffffe          BL       GPIO_ResetBits
;;;1005   			GPIO_SetBits(GPIOE,GPIO_Pin_3);//
00001a  2108              MOVS     r1,#8
00001c  4620              MOV      r0,r4
00001e  f7fffffe          BL       GPIO_SetBits
;;;1006               mode_sw = mode_pow;
000022  2003              MOVS     r0,#3
000024  71a8              STRB     r0,[r5,#6]
                  |L3.38|
;;;1007   		}
;;;1008   		break;
;;;1009   		default:
;;;1010   		break;
;;;1011   	}
;;;1012   }
000026  bd70              POP      {r4-r6,pc}
                  |L3.40|
000028  2104              MOVS     r1,#4                 ;990
00002a  4620              MOV      r0,r4                 ;990
00002c  f7fffffe          BL       GPIO_ResetBits
000030  2108              MOVS     r1,#8                 ;991
000032  4620              MOV      r0,r4                 ;991
000034  f7fffffe          BL       GPIO_ResetBits
000038  2001              MOVS     r0,#1                 ;992
00003a  71a8              STRB     r0,[r5,#6]            ;992
00003c  bd70              POP      {r4-r6,pc}
                  |L3.62|
00003e  2104              MOVS     r1,#4                 ;997
000040  4620              MOV      r0,r4                 ;997
000042  f7fffffe          BL       GPIO_SetBits
000046  2108              MOVS     r1,#8                 ;998
000048  4620              MOV      r0,r4                 ;998
00004a  f7fffffe          BL       GPIO_ResetBits
00004e  2002              MOVS     r0,#2                 ;999
000050  71a8              STRB     r0,[r5,#6]            ;999
000052  bd70              POP      {r4-r6,pc}
                          ENDP

                  |L3.84|
                          DCD      0x40021000
                  |L3.88|
                          DCD      ||area_number.15||

                          AREA ||.data||, DATA, ALIGN=0

                  pass
000000  00                DCB      0x00

                          AREA ||area_number.7||, DATA, ALIGN=0

                          EXPORTAS ||area_number.7||, ||.data||
                  clear_flag1
000000  00                DCB      0x00

                          AREA ||area_number.8||, DATA, ALIGN=0

                          EXPORTAS ||area_number.8||, ||.data||
                  clear_flag2
000000  00                DCB      0x00

                          AREA ||area_number.9||, DATA, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.data||
                  clear_flag3
000000  00                DCB      0x00

                          AREA ||area_number.10||, DATA, ALIGN=0

                          EXPORTAS ||area_number.10||, ||.data||
                  r_test
000000  00                DCB      0x00

                          AREA ||area_number.11||, DATA, ALIGN=2

                          EXPORTAS ||area_number.11||, ||.data||
                  clear_v
000000  00000000          DCFS     0x00000000 ; 0

                          AREA ||area_number.12||, DATA, ALIGN=2

                          EXPORTAS ||area_number.12||, ||.data||
                  clear_pv
000000  00000000          DCFS     0x00000000 ; 0

                          AREA ||area_number.13||, DATA, ALIGN=2

                          EXPORTAS ||area_number.13||, ||.data||
                  clear_lv
000000  00000000          DCFS     0x00000000 ; 0

                          AREA ||area_number.14||, DATA, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.data||
                  clear_r
000000  00                DCB      0x00

                          AREA ||area_number.15||, DATA, ALIGN=1

                          EXPORTAS ||area_number.15||, ||.data||
                  KeyState
000000  00                DCB      0x00
                  IsKeyRelease
000001  01                DCB      0x01
                  KeyValueTemp
000002  00                DCB      0x00
                  POW_t
000003  00                DCB      0x00
                  NewKey
000004  00                DCB      0x00
                  t_onoff
000005  00                DCB      0x00
                  mode_sw
000006  0000              DCB      0x00,0x00
                  KeyCounter
000008  0000              DCB      0x00,0x00

                          AREA ||area_number.16||, DATA, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.data||
                  t_KeyScan
000000  00                DCB      0x00

                          AREA ||area_number.17||, DATA, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.data||
                  t_wei
000000  00                DCB      0x00

                          AREA ||area_number.18||, DATA, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.data||
                  t_beep
000000  00                DCB      0x00

                          AREA ||area_number.19||, DATA, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.data||
                  t_Str
000000  00                DCB      0x00

                          AREA ||area_number.20||, DATA, ALIGN=0

                          EXPORTAS ||area_number.20||, ||.data||
                  t_lock
000000  00                DCB      0x00

                          AREA ||area_number.21||, DATA, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.data||
                  t_doub
000000  00                DCB      0x00

                          AREA ||area_number.22||, DATA, ALIGN=0

                          EXPORTAS ||area_number.22||, ||.data||
                  t_key_step
000000  00                DCB      0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  OFFSET_Zore
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  LOAD_t
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=0

                          EXPORTAS ||area_number.25||, ||.data||
                  track
000000  00                DCB      0x00

                          AREA ||area_number.26||, DATA, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.data||
                  menu_time
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  load_time
000000  0000              DCB      0x00,0x00

;*** Start embedded assembler ***

#line 1 "..\\drive\\key.c"
	AREA ||.rev16_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___5_key_c_pass____REV16|
#line 114 "D:\\Keil\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___5_key_c_pass____REV16| PROC
#line 115

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___5_key_c_pass____REVSH|
#line 128
|__asm___5_key_c_pass____REVSH| PROC
#line 129

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
